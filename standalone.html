<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Standalone validation code | Ajv: Another JSON validator</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.481c4284.css" as="style"><link rel="preload" href="/assets/js/app.bdacd7de.js" as="script"><link rel="preload" href="/assets/js/2.4de03afe.js" as="script"><link rel="preload" href="/assets/js/3.31f194fa.js" as="script"><link rel="preload" href="/assets/js/5.881ac991.js" as="script"><link rel="preload" href="/assets/js/36.9d6581f9.js" as="script"><link rel="prefetch" href="/assets/js/10.a77bff00.js"><link rel="prefetch" href="/assets/js/11.dbfecf7a.js"><link rel="prefetch" href="/assets/js/12.4199cbee.js"><link rel="prefetch" href="/assets/js/13.0a2065a2.js"><link rel="prefetch" href="/assets/js/14.e4995835.js"><link rel="prefetch" href="/assets/js/15.9abf43ad.js"><link rel="prefetch" href="/assets/js/16.1bceb2bf.js"><link rel="prefetch" href="/assets/js/17.9d17b348.js"><link rel="prefetch" href="/assets/js/18.74d702ca.js"><link rel="prefetch" href="/assets/js/19.b815beb5.js"><link rel="prefetch" href="/assets/js/20.d62c6806.js"><link rel="prefetch" href="/assets/js/21.5a0cda03.js"><link rel="prefetch" href="/assets/js/22.990c07bc.js"><link rel="prefetch" href="/assets/js/23.464530cf.js"><link rel="prefetch" href="/assets/js/24.648c434f.js"><link rel="prefetch" href="/assets/js/25.ff54e411.js"><link rel="prefetch" href="/assets/js/26.6206f922.js"><link rel="prefetch" href="/assets/js/27.0af84b95.js"><link rel="prefetch" href="/assets/js/28.0299bac7.js"><link rel="prefetch" href="/assets/js/29.71c719ab.js"><link rel="prefetch" href="/assets/js/30.3f01c999.js"><link rel="prefetch" href="/assets/js/31.b9b2f171.js"><link rel="prefetch" href="/assets/js/32.490c19a9.js"><link rel="prefetch" href="/assets/js/33.fb905a42.js"><link rel="prefetch" href="/assets/js/34.981b2b8a.js"><link rel="prefetch" href="/assets/js/35.f809c11c.js"><link rel="prefetch" href="/assets/js/37.ba829d2b.js"><link rel="prefetch" href="/assets/js/4.a1888a22.js"><link rel="prefetch" href="/assets/js/6.3a2f22f5.js"><link rel="prefetch" href="/assets/js/7.00244d32.js"><link rel="prefetch" href="/assets/js/8.929e1488.js"><link rel="prefetch" href="/assets/js/9.423a0378.js">
    <link rel="stylesheet" href="/assets/css/0.styles.481c4284.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/ajv.svg" alt="Ajv: Another JSON validator" class="logo"> <span class="site-name can-hide">Ajv: Another JSON validator</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/HOME.html" class="nav-link">
  New Home
</a></div><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Reference
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-subitem"><a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-subitem"><a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-subitem"><a href="/json-type-definition.html" class="nav-link">
  JSON Type Definition
</a></li><li class="dropdown-subitem"><a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-subitem"><a href="/standalone.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Standalone validation code
</a></li><li class="dropdown-subitem"><a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-subitem"><a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/HOME.html" class="nav-link">
  New Home
</a></div><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Reference
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-subitem"><a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-subitem"><a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-subitem"><a href="/json-type-definition.html" class="nav-link">
  JSON Type Definition
</a></li><li class="dropdown-subitem"><a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-subitem"><a href="/standalone.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Standalone validation code
</a></li><li class="dropdown-subitem"><a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-subitem"><a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Reference</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api.html" class="sidebar-link">API Reference</a></li><li><a href="/options.html" class="sidebar-link">Ajv options</a></li><li><a href="/json-schema.html" class="sidebar-link">JSON Schema</a></li><li><a href="/json-type-definition.html" class="sidebar-link">JSON Type Definition</a></li><li><a href="/strict-mode.html" class="sidebar-link">Strict mode</a></li><li><a href="/standalone.html" aria-current="page" class="active sidebar-link">Standalone validation code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standalone.html#usage-with-cli" class="sidebar-link">Usage with CLI</a></li><li class="sidebar-sub-header"><a href="/standalone.html#usage-from-code" class="sidebar-link">Usage from code</a></li><li class="sidebar-sub-header"><a href="/standalone.html#configuration-and-limitations" class="sidebar-link">Configuration and limitations</a></li></ul></li><li><a href="/keywords.html" class="sidebar-link">User defined keywords</a></li><li><a href="/coercion.html" class="sidebar-link">Type coercion rules</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Contributors</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Information</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="standalone-validation-code"><a href="#standalone-validation-code" class="header-anchor">#</a> Standalone validation code</h1> <p></p><div class="table-of-contents"><ul><li><a href="#usage-with-cli">Usage with CLI</a></li><li><a href="#usage-from-code">Usage from code</a></li><li><a href="#configuration-and-limitations">Configuration and limitations</a></li></ul></div><p></p> <p>Ajv supports generating standalone modules with exported validation function(s), with one default export or multiple named exports, that are pre-compiled and can be used without Ajv. It is useful for several reasons:</p> <ul><li>to reduce the browser bundle size - Ajv is not included in the bundle (although if you have a large number of schemas the bundle can become bigger - when the total size of generated validation code is bigger than Ajv code).</li> <li>to reduce the start-up time - the validation and compilation of schemas will happen during build time.</li> <li>to avoid dynamic code evaluation with Function constructor (used for schema compilation) - when it is prohibited by the browser page <a href="/security.html#content-security-policy">Content Security Policy</a>.</li></ul> <p>This functionality in Ajv v7 supersedes deprecated package ajv-pack that can be used with Ajv v6. All schemas, including those with recursive references, formats and user-defined keywords are supported, with few <a href="#configuration-and-limitations">limitations</a>.</p> <h2 id="usage-with-cli"><a href="#usage-with-cli" class="header-anchor">#</a> Usage with CLI</h2> <p>In most cases you would use this functionality via <a href="https://github.com/jessedc/ajv-cli" target="_blank" rel="noopener noreferrer">ajv-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (&gt;= 4.0.0) to generate module that exports validation function.</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g ajv-cli
ajv compile -s schema.json -o validate_schema.js
</code></pre></div><p><code>validate_schema.js</code> will contain the module exporting validation function that can be bundled into your application.</p> <p>See <a href="https://github.com/jessedc/ajv-cli" target="_blank" rel="noopener noreferrer">ajv-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> docs for additional information.</p> <h2 id="usage-from-code"><a href="#usage-from-code" class="header-anchor">#</a> Usage from code</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> ajv
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Ajv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ajv&quot;</span><span class="token punctuation">)</span> <span class="token comment">// version &gt;= v7.0.0</span>
<span class="token keyword">const</span> ajv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ajv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>code<span class="token operator">:</span> <span class="token punctuation">{</span>source<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// this option is required to generate standalone code</span>
<span class="token keyword">const</span> standaloneCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ajv/dist/standalone&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  $id<span class="token operator">:</span> <span class="token string">&quot;https://example.com/object.json&quot;</span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      pattern<span class="token operator">:</span> <span class="token string">&quot;^[a-z]+$&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 1. generate module with a single default export (CommonJS and ESM compatible):</span>
<span class="token keyword">const</span> validate <span class="token operator">=</span> ajv<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span>
<span class="token keyword">let</span> moduleCode <span class="token operator">=</span> <span class="token function">standaloneCode</span><span class="token punctuation">(</span>ajv<span class="token punctuation">,</span> validate<span class="token punctuation">)</span>

<span class="token comment">// 2. pass map of schema IDs to generate multiple exports,</span>
<span class="token comment">// it avoids code duplication if schemas are mutually recursive or have some share elements:</span>
<span class="token keyword">let</span> moduleCode <span class="token operator">=</span> <span class="token function">standaloneCode</span><span class="token punctuation">(</span>ajv<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  validateObject<span class="token operator">:</span> <span class="token string">&quot;https://example.com/object.json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3. or generate module with all schemas added to the instance (excluding meta-schemas),</span>
<span class="token comment">// export names would use schema IDs (or keys passed to addSchema method):</span>
<span class="token keyword">let</span> moduleCode <span class="token operator">=</span> <span class="token function">standaloneCode</span><span class="token punctuation">(</span>ajv<span class="token punctuation">)</span>

<span class="token comment">// now you can</span>
<span class="token comment">// write module code to file</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;/validate.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> moduleCode<span class="token punctuation">)</span>

<span class="token comment">// ... or require module from string</span>
<span class="token keyword">const</span> requireFromString <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;require-from-string&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> standaloneValidate <span class="token operator">=</span> <span class="token function">requireFromString</span><span class="token punctuation">(</span>moduleCode<span class="token punctuation">)</span> <span class="token comment">// for a single default export</span>
</code></pre></div><p>Ajv package should still be a run-time dependency for most schemas, but generated modules can only depend on small parts of it, so the whole Ajv will not be included in the bundle (or executed) if you require the modules with standalone validation code from your application code.</p> <h2 id="configuration-and-limitations"><a href="#configuration-and-limitations" class="header-anchor">#</a> Configuration and limitations</h2> <p>To support standalone code generation:</p> <ul><li>Ajv option <code>source.code</code> must be set to <code>true</code></li> <li>only <code>code</code> and <code>macro</code> user-defined keywords are supported (see <a href="/keywords.html">User defined keywords</a>).</li> <li>when <code>code</code> keywords define variables in shared scope using <code>gen.scopeValue</code>, they must provide <code>code</code> property with the code snippet. See source code of pre-defined keywords for examples in <a href="https://github.com/ajv-validator/ajv/blob/master/lib/vocabularies" target="_blank" rel="noopener noreferrer">vocabularies folder<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>if formats are used in standalone code, ajv option <code>code.formats</code> should contain the code snippet that will evaluate to an object with all used formats definition - it can be a call to <code>require(&quot;...&quot;)</code> with the correct path (relative to the location of saved module):</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> myFormats <span class="token keyword">from</span> <span class="token string">&quot;./my-formats&quot;</span>
<span class="token keyword">import</span> Ajv<span class="token punctuation">,</span> <span class="token punctuation">{</span>_<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ajv&quot;</span>
<span class="token keyword">const</span> ajv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ajv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  formats<span class="token operator">:</span> myFormats<span class="token punctuation">,</span>
  code<span class="token operator">:</span> <span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    formats<span class="token operator">:</span> _<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">require(&quot;./my-formats&quot;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>If you only use formats from <a href="https://github.com/ajv-validator/ajv-formats" target="_blank" rel="noopener noreferrer">ajv-formats<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> this option will be set by this package automatically.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ajv-validator/ajv/edit/master/docs/standalone.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/strict-mode.html" class="prev">
        Strict mode
      </a></span> <span class="next"><a href="/keywords.html">
        User defined keywords
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bdacd7de.js" defer></script><script src="/assets/js/2.4de03afe.js" defer></script><script src="/assets/js/3.31f194fa.js" defer></script><script src="/assets/js/5.881ac991.js" defer></script><script src="/assets/js/36.9d6581f9.js" defer></script>
  </body>
</html>
